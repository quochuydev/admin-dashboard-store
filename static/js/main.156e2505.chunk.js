(this["webpackJsonpadmin-dashboard-content"]=this["webpackJsonpadmin-dashboard-content"]||[]).push([[0],{161:function(e,t,n){},264:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(37),r=n.n(o),i=(n(161),n(6)),l=n(34),u=n(55),s=n(5),j=n(62),d=n.n(j),b=n(305),O=n(151),p=n(51),f=n(20),v=n(144),h=n(145),x=n.n(h),g=n(41),m=n.n(g),C=n(76),S=n(7),D=n(8),T="http://localhost:5000",y=function(){function e(t){Object(S.a)(this,e),this.loader=t}return Object(D.a)(e,[{key:"upload",value:function(){var e=Object(C.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,e.next=3,this.loader.file;case 3:return n=e.sent,t.append("files",n),e.abrupt("return",new Promise((function(e,n){d()({url:"".concat(T,"/files"),method:"post",data:t}).then((function(t){var n=t.data;n.default=n.files[0].url,console.log("resData.files[0].url",n.files[0].url),e(n)})).catch((function(e){console.log(e),n(e)}))})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"abort",value:function(){}}]),e}(),R=n(3),_=function(e){var t=e.initValue,n=(e.readOnly,e.onData);return Object(R.jsx)(v.CKEditor,{editor:x.a,data:t,onReady:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new y(e)}},config:{ckfinder:{uploadUrl:"".concat(T,"/files")}},onChange:function(e,t){n(t.getData())}})},E=n(302),k=n(18),A=n(306),w=n(65),P=n(295),U=function(e){var t=e.files,n=e.handleDropZoneDrop,a=["image/gif","image/jpeg","image/png"],c=!t.length&&Object(R.jsx)(E.a.FileUpload,{}),o=t.length>0&&Object(R.jsx)(k.a,{vertical:!0,children:t.map((function(e,t){return Object(R.jsxs)(k.a,{alignment:"center",children:[Object(R.jsx)(A.a,{size:"small",alt:e.name,source:a.includes(e.type)?window.URL.createObjectURL(e):P.a}),Object(R.jsxs)("div",{children:[e.name," ",Object(R.jsxs)(w.a,{children:[e.size," bytes"]})]})]},t)}))});return Object(R.jsxs)(E.a,{onDrop:n,children:[o,c]})};var L=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1],r=Object(a.useCallback)(function(){var t=Object(C.a)(m.a.mark((function t(n,a,c){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.upload){t.next=5;break}return t.next=3,e.upload(a);case 3:return r=t.sent,t.abrupt("return",o((function(e){return[].concat(Object(i.a)(e),Object(i.a)(r))})));case 5:return t.abrupt("return",o((function(e){return[].concat(Object(i.a)(e),Object(i.a)(a))})));case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),[]);return Object(R.jsx)(U,{files:c,handleDropZoneDrop:r})};var F=n(299),B=n(297),I=n(303);function K(e){var t=e.variant,n=e.index,a=e.selectedResources,c=e.handleChange,o=t.id,r=t.title,i=t.price,l=t.sku,u=t.barcode,s=(t.imageId,t.image);return Object(R.jsxs)(F.a.Row,{id:o,selected:a.includes(o),position:n,children:[Object(R.jsx)(F.a.Cell,{children:Object(R.jsx)(A.a,{source:s||P.a})}),Object(R.jsx)(F.a.Cell,{children:Object(R.jsx)(O.a,{value:r,onChange:function(e){return c(n,"title",e)}})}),Object(R.jsx)(F.a.Cell,{children:Object(R.jsx)(O.a,{value:String(i),onChange:function(e){return c(n,"price",e)},type:"number"})}),Object(R.jsx)(F.a.Cell,{children:Object(R.jsx)(O.a,{value:l,onChange:function(e){return c(n,"sku",e)}})}),Object(R.jsx)(F.a.Cell,{children:Object(R.jsx)(O.a,{value:u,onChange:function(e){return c(n,"barcode",e)}})}),Object(R.jsx)(F.a.Cell,{children:Object(R.jsx)(O.a,{value:t.options[0],onChange:function(e){return c(n,"barcode",e)}})}),Object(R.jsx)(F.a.Cell,{children:Object(R.jsx)(O.a,{value:t.options[1],onChange:function(e){return c(n,"barcode",e)}})})]},o)}var N=c.a.memo(W);function W(e){var t=e.product.variants,n=Object(B.a)(t),c=n.selectedResources,o=n.allResourcesSelected,r=n.handleSelectionChange,i=[{content:"Edit variants",onAction:function(){return console.log("Todo: implement bulk edit",c)}}],s=[{content:"Delete variants",onAction:function(){return console.log("Todo: implement bulk delete",c)}}],j=Object(a.useCallback)((function(n,a,c){var o=t.map((function(e,t){return t===n?Object(u.a)(Object(u.a)({},e),{},Object(l.a)({},a,c)):e}));e.onData(o)}),[t]),d=t.map((function(e,t){return Object(R.jsx)(K,{variant:e,index:t,selectedResources:c,handleChange:j,key:t})}));return Object(R.jsx)(I.a,{children:Object(R.jsx)(F.a,{resourceName:{singular:"variant",plural:"variants"},itemCount:t.length,selectedItemsCount:o?"All":c.length,onSelectionChange:r,bulkActions:s,promotedBulkActions:i,headings:[{title:"Image"},{title:"Title"},{title:"Price"},{title:"SKU"},{title:"Barcode"},{title:"Option 1"},{title:"Option 2"}],children:d})})}var H=n(300),M=n(10),V=n(298),z=c.a.memo(J);function J(e){var t=e.value,n=e.allowMultiple,c=void 0!==n&&n,o=[{value:"type1",label:"Type 1"},{value:"type2",label:"Type 2"},{value:"type3",label:"Type 3"}],r=Object(a.useState)(t),i=Object(s.a)(r,2),l=i[0],u=i[1],j=Object(a.useState)(o),d=Object(s.a)(j,2),b=d[0],O=d[1],p=Object(a.useState)(!1),v=Object(s.a)(p,2),h=v[0],x=v[1],g=Object(a.useCallback)((function(e){u(e),h||x(!0),setTimeout((function(){if(""===e)return O(o),void x(!1);var t=new RegExp(e,"i"),n=b.filter((function(e){return e.label.match(t)}));O(n),x(!1)}),300)}),[o,h,b]),m=Object(a.useCallback)((function(t){e.onData(t),u(c?t.join(", "):t[0])}),[b]),C=Object(R.jsx)(H.a.TextField,{onChange:g,label:"Product type",value:l,placeholder:"exp: T-Shirt"}),S=Object(R.jsxs)(f.a,{icon:Object(R.jsx)(M.a,{source:V.a}),children:["Add new: ",l]});return Object(R.jsx)(H.a,{allowMultiple:c,options:b,selected:t,onSelect:m,emptyState:S,loading:h,textField:C})}var X=n(147),Z=n.n(X),q=n(307),G=n(304),Q=n(148);n(264);function Y(e){var t=e.product,n=[],c=function(e,t){var n=e.variants.map((function(e){return e.options[t]}));return Z.a.uniqBy(n)};return t.options.map((function(e,o){return n.push(function(e){var t=e.value,n=e.tags,c=Object(a.useState)(n.map((function(e){return{id:e,text:e}}))),o=Object(s.a)(c,2),r=o[0],l=o[1],u=Object(a.useState)(t),j=Object(s.a)(u,2),d=j[0],b=j[1],O=Object(a.useCallback)((function(e){return b(e)}),[]);console.log(r);var p=Object(a.useCallback)((function(e,t,n){var a=Object(i.a)(r).slice();a.splice(t,1),a.splice(n,0,e),l(a)}),[]),f=9,v=32,h=188;return[Object(R.jsx)(q.a,{options:[{label:"Size",value:"Size"},{label:"Color",value:"Color"}],onChange:O,value:d}),Object(R.jsx)(Q.WithContext,{tags:r,handleDelete:function(e){l(r.filter((function(t,n){return n!==e})))},handleAddition:function(e){return l((function(t){return[].concat(Object(i.a)(t),[e])}))},handleDrag:p,delimiters:[f,v,h]})]}({value:e,tags:c(t,o),onData:function(e){return console.log(e)}}))})),Object(R.jsx)(G.a,{columnContentTypes:["text","text"],headings:["",""],rows:n})}function $(e){return Object(R.jsx)(q.a,{options:[{label:"Is active",value:!0},{label:"Is draft",value:!1}],onChange:e.onData,value:e.value})}function ee(){var e=Object(a.useState)({title:null,handle:null,description:null,options:["Size","Color"],variants:[{image:null,title:null,sku:null,price:0,options:["M","Red"]},{image:null,title:"null",sku:null,price:100,options:["M","Blue"]},{image:null,title:null,sku:null,price:0,options:["L","Red"]}],productType:"type1",vendor:"type1",tags:[],isActive:!0}),t=Object(s.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){var e={method:"get",url:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/admin-dashboard-store",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:5000"}).NEXT_PUBLIC_SERVER_URL,"/orders")};d()(e).then((function(e){var t;console.log(null===(t=e.data)||void 0===t?void 0:t.items)})).catch((function(e){console.log(e)}))}),[]);var o=Object(a.useCallback)((function(e,t){return c((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(l.a)({},e,t))}))}),[]),r=Object(a.useState)(!1),j=Object(s.a)(r,2),v=j[0],h=j[1],x=Object(a.useCallback)((function(e){return h(e)}),[]);return Object(R.jsx)(R.Fragment,{children:Object(R.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.log(n);var t={method:"get",url:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/admin-dashboard-store",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:5000"}).NEXT_PUBLIC_SERVER_URL,"/products")};d()(t).then((function(e){var t;console.log(null===(t=e.data)||void 0===t?void 0:t.items)})).catch((function(e){console.log(e)}))},children:Object(R.jsxs)(b.a,{children:[Object(R.jsxs)(b.a.Section,{children:[Object(R.jsx)("p",{children:JSON.stringify(n)}),Object(R.jsx)(O.a,{label:"Title",value:n.title,onChange:function(e){return o("title",e)}}),Object(R.jsx)(_,{initValue:n.description,onData:function(e){return o("description",e)}}),Object(R.jsx)(L,{product:n}),Object(R.jsx)(p.a,{label:"Product has many variants",checked:v,onChange:x}),Object(R.jsx)(Y,{product:n}),Object(R.jsx)(N,{product:n,onData:function(e){return o("variants",e)}}),Object(R.jsx)(f.a,{submit:!0,children:"Save"})]}),Object(R.jsxs)(b.a.Section,{secondary:!0,children:[Object(R.jsx)($,{value:n.isActive,onData:function(e){return o("isActive",e)}}),Object(R.jsx)(z,{value:n.productType,onData:function(e){return o.apply(void 0,["productType"].concat(Object(i.a)(e)))}}),Object(R.jsx)(z,{value:n.vendor,onData:function(e){return o.apply(void 0,["vendor"].concat(Object(i.a)(e)))}}),Object(R.jsx)(z,{value:n.tags,onData:function(e){return o("tags",e)},allowMultiple:!0})]})]})})})}var te=function(){return Object(R.jsx)("div",{children:Object(R.jsx)(ee,{})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,308)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))},ae=n(150),ce=n(301);n(285);r.a.render(Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(ce.a,{i18n:ae,children:Object(R.jsx)(te,{})})}),document.getElementById("root")),ne()}},[[288,1,2]]]);
//# sourceMappingURL=main.156e2505.chunk.js.map