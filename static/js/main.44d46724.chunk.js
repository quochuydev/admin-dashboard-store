(this["webpackJsonpadmin-dashboard-content"]=this["webpackJsonpadmin-dashboard-content"]||[]).push([[0],{161:function(e,t,n){},264:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(37),r=n.n(o),l=(n(161),n(6)),i=n(34),u=n(55),s=n(5),j=n(62),d=n.n(j),b=n(305),p=n(151),O=n(51),f=n(20),h="http://localhost:5000",v=n(144),x=n(145),g=n.n(x),m=n(41),C=n.n(m),S=n(76),y=n(7),D=n(8),k=function(){function e(t){Object(y.a)(this,e),this.loader=t}return Object(D.a)(e,[{key:"upload",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,e.next=3,this.loader.file;case 3:return n=e.sent,t.append("files",n),e.abrupt("return",new Promise((function(e,n){d()({url:"".concat(h,"/files"),method:"post",data:t}).then((function(t){var n=t.data;n.default=n.files[0].url,console.log("resData.files[0].url",n.files[0].url),e(n)})).catch((function(e){console.log(e),n(e)}))})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"abort",value:function(){}}]),e}(),T=n(3),R=function(e){var t=e.initValue,n=(e.readOnly,e.onData);return Object(T.jsx)(v.CKEditor,{editor:g.a,data:t,onReady:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new k(e)}},config:{ckfinder:{uploadUrl:"".concat(h,"/files")}},onChange:function(e,t){n(t.getData())}})},w=n(302),E=n(18),A=n(306),_=n(65),F=n(295),I=function(e){var t=e.files,n=e.handleDropZoneDrop,a=["image/gif","image/jpeg","image/png"],c=!t.length&&Object(T.jsx)(w.a.FileUpload,{}),o=t.length>0&&Object(T.jsx)(E.a,{vertical:!0,children:t.map((function(e,t){return Object(T.jsxs)(E.a,{alignment:"center",children:[Object(T.jsx)(A.a,{size:"small",alt:e.name,source:a.includes(e.type)?window.URL.createObjectURL(e):F.a}),Object(T.jsxs)("div",{children:[e.name," ",Object(T.jsxs)(_.a,{children:[e.size," bytes"]})]})]},t)}))});return Object(T.jsxs)(w.a,{onDrop:n,children:[o,c]})};var P=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1],r=Object(a.useCallback)(function(){var t=Object(S.a)(C.a.mark((function t(n,a,c){var r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.upload){t.next=5;break}return t.next=3,e.upload(a);case 3:return r=t.sent,t.abrupt("return",o((function(e){return[].concat(Object(l.a)(e),Object(l.a)(r))})));case 5:return t.abrupt("return",o((function(e){return[].concat(Object(l.a)(e),Object(l.a)(a))})));case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),[]);return Object(T.jsx)(I,{files:c,handleDropZoneDrop:r})};var U=n(299),L=n(297),B=n(303);function K(e){var t=e.variant,n=e.index,a=e.selectedResources,c=e.handleChange,o=t.id,r=t.title,l=t.price,i=t.sku,u=t.barcode,s=(t.imageId,t.image);return Object(T.jsxs)(U.a.Row,{id:o,selected:a.includes(o),position:n,children:[Object(T.jsx)(U.a.Cell,{children:Object(T.jsx)(A.a,{source:s||F.a})}),Object(T.jsx)(U.a.Cell,{children:Object(T.jsx)(p.a,{value:r,onChange:function(e){return c(n,"title",e)}})}),Object(T.jsx)(U.a.Cell,{children:Object(T.jsx)(p.a,{value:String(l),onChange:function(e){return c(n,"price",e)},type:"number"})}),Object(T.jsx)(U.a.Cell,{children:Object(T.jsx)(p.a,{value:i,onChange:function(e){return c(n,"sku",e)}})}),Object(T.jsx)(U.a.Cell,{children:Object(T.jsx)(p.a,{value:u,onChange:function(e){return c(n,"barcode",e)}})}),Object(T.jsx)(U.a.Cell,{children:Object(T.jsx)(p.a,{value:t.options[0],onChange:function(e){return c(n,"barcode",e)}})}),Object(T.jsx)(U.a.Cell,{children:Object(T.jsx)(p.a,{value:t.options[1],onChange:function(e){return c(n,"barcode",e)}})})]},o)}var M=c.a.memo(N);function N(e){var t=e.product.variants,n=Object(L.a)(t),c=n.selectedResources,o=n.allResourcesSelected,r=n.handleSelectionChange,l=[{content:"Edit variants",onAction:function(){return console.log("Todo: implement bulk edit",c)}}],s=[{content:"Delete variants",onAction:function(){return console.log("Todo: implement bulk delete",c)}}],j=Object(a.useCallback)((function(n,a,c){var o=t.map((function(e,t){return t===n?Object(u.a)(Object(u.a)({},e),{},Object(i.a)({},a,c)):e}));e.onData(o)}),[t]),d=t.map((function(e,t){return Object(T.jsx)(K,{variant:e,index:t,selectedResources:c,handleChange:j,key:t})}));return Object(T.jsx)(B.a,{children:Object(T.jsx)(U.a,{resourceName:{singular:"variant",plural:"variants"},itemCount:t.length,selectedItemsCount:o?"All":c.length,onSelectionChange:r,bulkActions:s,promotedBulkActions:l,headings:[{title:"Image"},{title:"Title"},{title:"Price"},{title:"SKU"},{title:"Barcode"},{title:"Option 1"},{title:"Option 2"}],children:d})})}var z=n(300),V=n(10),W=n(298),H=c.a.memo(J);function J(e){var t=e.value,n=e.allowMultiple,c=void 0!==n&&n,o=[{value:"type1",label:"Type 1"},{value:"type2",label:"Type 2"},{value:"type3",label:"Type 3"}],r=Object(a.useState)(t),l=Object(s.a)(r,2),i=l[0],u=l[1],j=Object(a.useState)(o),d=Object(s.a)(j,2),b=d[0],p=d[1],O=Object(a.useState)(!1),h=Object(s.a)(O,2),v=h[0],x=h[1],g=Object(a.useCallback)((function(e){u(e),v||x(!0),setTimeout((function(){if(""===e)return p(o),void x(!1);var t=new RegExp(e,"i"),n=b.filter((function(e){return e.label.match(t)}));p(n),x(!1)}),300)}),[o,v,b]),m=Object(a.useCallback)((function(t){e.onData(t),u(c?t.join(", "):t[0])}),[b]),C=Object(T.jsx)(z.a.TextField,{onChange:g,label:"Product type",value:i,placeholder:"exp: T-Shirt"}),S=Object(T.jsxs)(f.a,{icon:Object(T.jsx)(V.a,{source:W.a}),children:["Add new: ",i]});return Object(T.jsx)(z.a,{allowMultiple:c,options:b,selected:t,onSelect:m,emptyState:S,loading:v,textField:C})}var Z=n(147),q=n.n(Z),X=n(307),G=n(304),Q=n(148);n(264);function Y(e){var t=e.product,n=[],c=function(e,t){var n=e.variants.map((function(e){return e.options[t]}));return q.a.uniqBy(n)};return t.options.map((function(e,o){return n.push(function(e){var t=e.value,n=e.tags,c=Object(a.useState)(n.map((function(e){return{id:e,text:e}}))),o=Object(s.a)(c,2),r=o[0],i=o[1],u=Object(a.useState)(t),j=Object(s.a)(u,2),d=j[0],b=j[1],p=Object(a.useCallback)((function(e){return b(e)}),[]);console.log(r);var O=Object(a.useCallback)((function(e,t,n){var a=Object(l.a)(r).slice();a.splice(t,1),a.splice(n,0,e),i(a)}),[]),f=9,h=32,v=188;return[Object(T.jsx)(X.a,{options:[{label:"Size",value:"Size"},{label:"Color",value:"Color"}],onChange:p,value:d}),Object(T.jsx)(Q.WithContext,{tags:r,handleDelete:function(e){i(r.filter((function(t,n){return n!==e})))},handleAddition:function(e){return i((function(t){return[].concat(Object(l.a)(t),[e])}))},handleDrag:O,delimiters:[f,h,v]})]}({value:e,tags:c(t,o),onData:function(e){return console.log(e)}}))})),Object(T.jsx)(G.a,{columnContentTypes:["text","text"],headings:["",""],rows:n})}function $(e){return Object(T.jsx)(X.a,{options:[{label:"Is active",value:!0},{label:"Is draft",value:!1}],onChange:e.onData,value:e.value})}function ee(){var e=Object(a.useState)({title:null,handle:null,description:null,options:["Size","Color"],productType:"type1",vendor:"type1",tags:[],isActive:!0,variants:[{imageId:null,title:null,sku:null,barcode:null,price:0,options:["M","Red"]},{imageId:null,title:"null",sku:null,barcode:null,price:100,options:["M","Blue"]},{imageId:null,title:null,sku:null,barcode:null,price:0,options:["L","Red"]}]}),t=Object(s.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){var e={method:"get",url:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/admin-dashboard-store",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:5000"}).NEXT_PUBLIC_SERVER_URL,"/orders")};d()(e).then((function(e){var t;console.log(null===(t=e.data)||void 0===t?void 0:t.items)})).catch((function(e){console.log(e)}))}),[]);var o=Object(a.useCallback)((function(e,t){return c((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(i.a)({},e,t))}))}),[]),r=Object(a.useState)(!1),j=Object(s.a)(r,2),v=j[0],x=j[1],g=Object(a.useCallback)((function(e){return x(e)}),[]);return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.log(n),d()({url:"".concat(h,"/products"),method:"post",data:n}).then((function(e){var t=e.data;console.log("result",t)})).catch((function(e){console.log(e)}))},children:Object(T.jsxs)(b.a,{children:[Object(T.jsxs)(b.a.Section,{children:[Object(T.jsx)("p",{children:JSON.stringify(n)}),Object(T.jsx)(p.a,{label:"Title",value:n.title,onChange:function(e){return o("title",e)}}),Object(T.jsx)(R,{initValue:n.description,onData:function(e){return o("description",e)}}),Object(T.jsx)(P,{product:n}),Object(T.jsx)(O.a,{label:"Product has many variants",checked:v,onChange:g}),Object(T.jsx)(Y,{product:n}),Object(T.jsx)(M,{product:n,onData:function(e){return o("variants",e)}}),Object(T.jsx)(f.a,{submit:!0,children:"Save"})]}),Object(T.jsxs)(b.a.Section,{secondary:!0,children:[Object(T.jsx)($,{value:n.isActive,onData:function(e){return o("isActive",e)}}),Object(T.jsx)(H,{value:n.productType,onData:function(e){return o.apply(void 0,["productType"].concat(Object(l.a)(e)))}}),Object(T.jsx)(H,{value:n.vendor,onData:function(e){return o.apply(void 0,["vendor"].concat(Object(l.a)(e)))}}),Object(T.jsx)(H,{value:n.tags,onData:function(e){return o("tags",e)},allowMultiple:!0})]})]})})})}var te=function(){return Object(T.jsx)("div",{children:Object(T.jsx)(ee,{})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,308)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))},ae=n(150),ce=n(301);n(285);r.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(ce.a,{i18n:ae,children:Object(T.jsx)(te,{})})}),document.getElementById("root")),ne()}},[[288,1,2]]]);
//# sourceMappingURL=main.44d46724.chunk.js.map