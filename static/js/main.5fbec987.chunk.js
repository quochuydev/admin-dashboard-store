(this["webpackJsonpadmin-dashboard-content"]=this["webpackJsonpadmin-dashboard-content"]||[]).push([[0],{136:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(36),o=n.n(r),i=(n(136),n(26)),l=n.n(i),u=n(43),s=n(5),j=n(33),d=n(39),b=n(4),p=n(51),f=n.n(p),O=n(261),v=n(129),h=n(22),x="https://api-v2.cafeman.xyz",g=n(124),m=n(125),C=n.n(m),y=n(6),k=n(7),D=function(){function e(t){Object(y.a)(this,e),this.loader=t}return Object(k.a)(e,[{key:"upload",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,e.next=3,this.loader.file;case 3:return n=e.sent,t.append("files",n),e.abrupt("return",new Promise((function(e,n){f()({url:"".concat(x,"/files"),method:"post",data:t}).then((function(t){var n=t.data;n.default=n.files[0].url,console.log("resData.files[0].url",n.files[0].url),e(n)})).catch((function(e){console.log(e),n(e)}))})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"abort",value:function(){}}]),e}(),w=n(2),S=function(e){var t=e.initValue,n=(e.readOnly,e.onData);return Object(w.jsx)(g.CKEditor,{editor:C.a,data:t,onReady:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new D(e)}},config:{basicEntities:!1,ckfinder:{uploadUrl:"".concat(x,"/files")}},onChange:function(e,t){n(t.getData())}})},T=n(259),F=n(14),A=n(262),R=n(61),I=n(252),E=function(e){var t=e.files,n=e.handleDropZoneDrop,a=["image/gif","image/jpeg","image/png"],c=!t.length&&Object(w.jsx)(T.a.FileUpload,{}),r=t.length>0&&Object(w.jsx)(F.a,{vertical:!0,children:t.map((function(e,t){return Object(w.jsxs)(F.a,{alignment:"center",children:[Object(w.jsx)(A.a,{size:"small",alt:e.name,source:a.includes(e.type)?window.URL.createObjectURL(e):I.a}),Object(w.jsxs)("div",{children:[e.name," ",Object(w.jsxs)(R.a,{children:[e.size," bytes"]})]})]},t)}))});return Object(w.jsxs)(T.a,{onDrop:n,children:[r,c]})};var L=function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2),c=n[0],r=n[1],o=Object(a.useCallback)(function(){var t=Object(u.a)(l.a.mark((function t(n,a,c){var o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a),!e.upload){t.next=6;break}return t.next=4,e.upload(a);case 4:return o=t.sent,t.abrupt("return",r((function(e){return[].concat(Object(s.a)(e),Object(s.a)(o))})));case 6:return t.abrupt("return",r((function(e){return[].concat(Object(s.a)(e),Object(s.a)(a))})));case 7:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),[]);return Object(w.jsx)(E,{files:c,handleDropZoneDrop:o})};var P=n(256),U=n(254),B=n(260);function M(e){var t=e.variant,n=e.index,a=e.selectedResources,c=e.handleChange,r=e.removeLine,o=t.id,i=(t.title,t.price),l=t.sku,u=t.barcode,s=(t.imageId,t.image);return Object(w.jsxs)(P.a.Row,{id:n,selected:a.includes(n),position:n,children:[Object(w.jsx)(P.a.Cell,{children:Object(w.jsx)(A.a,{source:s||I.a})}),Object(w.jsx)(P.a.Cell,{children:Object(w.jsx)(v.a,{value:String(i),onChange:function(e){return c(n,"price",e)},type:"number"})}),Object(w.jsx)(P.a.Cell,{children:Object(w.jsx)(v.a,{value:l,onChange:function(e){return c(n,"sku",e)}})}),Object(w.jsx)(P.a.Cell,{children:Object(w.jsx)(v.a,{value:u,onChange:function(e){return c(n,"barcode",e)}})}),Object(w.jsx)(P.a.Cell,{children:Object(w.jsx)(v.a,{value:t.options[0],onChange:function(e){return c(n,"options",[e,t.options[1]])}})}),Object(w.jsx)(P.a.Cell,{children:Object(w.jsx)(v.a,{value:t.options[1],onChange:function(e){return c(n,"options",[t.options[0],e])}})}),Object(w.jsx)(P.a.Cell,{children:Object(w.jsx)(h.a,{onClick:function(){return r(n)},children:"Remove"})})]},o)}var z=c.a.memo(J);function J(e){var t=e.product.variants,n=Object(U.a)(t),c=n.selectedResources,r=n.allResourcesSelected,o=n.handleSelectionChange,i=[{content:"Edit variants",onAction:function(){return console.log("Todo: implement bulk edit",c)}}],l=[{content:"Delete variants",onAction:function(){return console.log("Todo: implement bulk delete",c)}}],u=Object(a.useCallback)((function(n,a,c){var r=t.map((function(e,t){return t===n?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},a,c)):e}));e.onData(r)}),[e,t]),s=function(n){var a=t.filter((function(e,t){return t!==n}));e.onData(a)},b=t.map((function(e,t){return Object(w.jsx)(M,{key:t,variant:e,index:t,selectedResources:c,handleChange:u,removeLine:s})})),p=[{title:"Image"},{title:"Price"},{title:"SKU"},{title:"Barcode"},{title:Object(w.jsx)(w.Fragment,{children:"Option 1"})},{title:"Option 2"}];return Object(w.jsx)(B.a,{children:Object(w.jsx)(P.a,{resourceName:{singular:"variant",plural:"variants"},itemCount:t.length,selectedItemsCount:r?"All":c.length,onSelectionChange:o,bulkActions:l,promotedBulkActions:i,headings:p,children:b})})}var K=n(257),N=n(9),V=n(255),Z=c.a.memo(q);function q(e){var t=e.value,n=e.allowMultiple,c=void 0!==n&&n,r=[{value:"type1",label:"Type 1"},{value:"type2",label:"Type 2"},{value:"type3",label:"Type 3"}],o=Object(a.useState)(t),i=Object(b.a)(o,2),l=i[0],u=i[1],s=Object(a.useState)(r),j=Object(b.a)(s,2),d=j[0],p=j[1],f=Object(a.useState)(!1),O=Object(b.a)(f,2),v=O[0],x=O[1],g=Object(a.useCallback)((function(e){u(e),v||x(!0),setTimeout((function(){if(""===e)return p(r),void x(!1);var t=new RegExp(e,"i"),n=d.filter((function(e){return e.label.match(t)}));p(n),x(!1)}),300)}),[r,v,d]),m=Object(a.useCallback)((function(t){e.onData(t),u(c?t.join(", "):t[0])}),[d]),C=Object(w.jsx)(K.a.TextField,{onChange:g,label:"Product type",value:l,placeholder:"exp: T-Shirt"}),y=Object(w.jsxs)(h.a,{icon:Object(w.jsx)(N.a,{source:V.a}),children:["Add new: ",l]});return Object(w.jsx)(K.a,{allowMultiple:c,options:d,selected:t,onSelect:m,emptyState:y,loading:v,textField:C})}var G=n(263);function H(e){return Object(w.jsx)(G.a,{options:[{label:"Is active",value:!0},{label:"Is draft",value:!1}],onChange:e.onData,value:e.value})}function Q(){var e=Object(a.useState)({title:null,handle:null,description:null,options:[],productType:null,vendor:null,tags:[],isActive:!0,variants:[{imageId:null,title:null,sku:null,barcode:null,price:0,options:[]}]}),t=Object(b.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){var e={method:"get",url:"".concat(x,"/orders")};f()(e).then((function(e){var t;console.log(null===(t=e.data)||void 0===t?void 0:t.items)})).catch((function(e){console.log(e)}))}),[]);var r=Object(a.useCallback)((function(e,t){return c((function(n){return Object(d.a)(Object(d.a)({},n),{},Object(j.a)({},e,t))}))}),[]),o=Object(a.useCallback)((function(){var e=Object(s.a)(n.variants);e.push({imageId:null,title:null,sku:null,barcode:null,price:0,options:[]}),c((function(t){return Object(d.a)(Object(d.a)({},t),{},{variants:e})}))}),[n]);return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.log(n),f()({url:"".concat(x,"/products"),method:"post",data:n}).then((function(e){var t=e.data;console.log("result",t)})).catch((function(e){console.log(e)}))},children:Object(w.jsxs)(O.a,{children:[Object(w.jsxs)(O.a.Section,{children:[Object(w.jsx)(v.a,{label:"Title",value:n.title,onChange:function(e){return r("title",e)}}),Object(w.jsx)(S,{initValue:n.description,onData:function(e){return r("description",e)}}),Object(w.jsx)(L,{product:n,upload:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("files",t),e.abrupt("return",new Promise((function(e,t){f()({url:"".concat(x,"/files"),method:"post",data:n}).then((function(t){console.log("resData.files",t.data),e(t.data)})).catch((function(e){console.log(e),t(e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(w.jsx)(h.a,{onClick:o,children:"Add variant"}),Object(w.jsx)(z,{product:n,onData:function(e){return r("variants",e)}}),Object(w.jsx)(h.a,{submit:!0,children:"Save"})]}),Object(w.jsxs)(O.a.Section,{secondary:!0,children:[Object(w.jsx)(H,{value:n.isActive,onData:function(e){return r("isActive",e)}}),Object(w.jsx)(Z,{value:n.productType,onData:function(e){return r.apply(void 0,["productType"].concat(Object(s.a)(e)))}}),Object(w.jsx)(Z,{value:n.vendor,onData:function(e){return r.apply(void 0,["vendor"].concat(Object(s.a)(e)))}}),Object(w.jsx)(Z,{value:n.tags,onData:function(e){return r("tags",e)},allowMultiple:!0}),Object(w.jsx)("p",{children:JSON.stringify(n,null,2)})]})]})})})}var W=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(Q,{})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,264)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))},Y=n(128),$=n(258);n(245);o.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)($.a,{i18n:Y,children:Object(w.jsx)(W,{})})}),document.getElementById("root")),X()}},[[247,1,2]]]);
//# sourceMappingURL=main.5fbec987.chunk.js.map